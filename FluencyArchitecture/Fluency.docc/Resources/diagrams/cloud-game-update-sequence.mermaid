sequenceDiagram
    participant GameAppView
    participant VM as GameViewModel
    participant SM as SyncManager
    participant GDM as GameDataManager
    participant FS as Firestore
    participant SD as SwiftData

    GameAppView->>VM: refreshGameData()
    VM->>SM: syncIfNeeded()
    
    SM->>SD: Check last sync time
    
    alt Needs Sync
        SM->>GDM: fetchGameTypes()
        GDM->>FS: Query collections
        FS-->>GDM: Game data
        GDM-->>SM: GameType models
        
        SM->>SD: Clear old data
        SM->>SD: Save new LocalGameType models
    end
    
    VM->>SD: Fetch local data
    SD-->>VM: LocalGameType models
    VM->>VM: Convert to GameType models
    VM-->>GameAppView: Update view